<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>GMT 中文社区</title>
    <link>http://gmt-china.org/categories/GMT%E7%A4%BA%E4%BE%8B/index.xml</link>
    <description>Recent content on GMT 中文社区</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cmn-Hans</language>
    <managingEditor>admin@gmt-china.org (GMT 中文社区)</managingEditor>
    <webMaster>admin@gmt-china.org (GMT 中文社区)</webMaster>
    <copyright>Powered by [Hugo](https://gohugo.io) &amp; Hosted by [GitHub](https://github.com/gmt-china/gmt-china.org).</copyright>
    <atom:link href="http://gmt-china.org/categories/GMT%E7%A4%BA%E4%BE%8B/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>中国国界、省界及九段线</title>
      <link>http://gmt-china.org/example/ex003/</link>
      <pubDate>Sun, 23 Oct 2016 00:00:00 +0000</pubDate>
      <author>admin@gmt-china.org (GMT 中文社区)</author>
      <guid>http://gmt-china.org/example/ex003/</guid>
      <description>

&lt;p&gt;由于存在领土争议，GMT 自带的国界数据是无法直接用于发表的，因而用户需要自己准备国界数据。本文提供了笔者自己数字化的几个国界相关数据以及两个绘制中国地图的脚本。&lt;/p&gt;

&lt;div class=&#34;notices info&#34; &gt;&lt;p&gt;数据下载： &lt;a href=&#34;http://gmt-china.org/datas/CN-border-La.dat&#34;&gt;CN-border-La.dat&lt;/a&gt;
&lt;a href=&#34;http://gmt-china.org/datas/CN-border-L1.dat&#34;&gt;CN-border-L1.dat&lt;/a&gt;
&lt;a href=&#34;http://gmt-china.org/datas/nine-dash-line.dat&#34;&gt;nine-dash-line.dat&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;


&lt;div class=&#34;alert alert-info&#34; role=&#34;alert&#34;&gt;&lt;ol&gt;
&lt;li&gt;无法保证国界数据完全准确或可通过地图审核；&lt;/li&gt;
&lt;li&gt;欢迎用户共享更准确的国界数据；&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CN-border-La.dat&lt;/code&gt; 中包含最全的信息，包括国界、省界、九段线以及南海诸多小岛；&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CN-border-L1.dat&lt;/code&gt; 包含国界、九段线以及南海诸岛数据，不含省界数据；&lt;/li&gt;
&lt;li&gt;&lt;code&gt;nine-dash-line.dat&lt;/code&gt; 仅包含九段线数据；&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;


&lt;h2 id=&#34;jd-等距圆锥投影&#34;&gt;-JD 等距圆锥投影&lt;/h2&gt;

&lt;p&gt;


&lt;pre&gt;&lt;code class=&#34;language-bash line-numbers&#34;&gt;#!/bin/bash
R=70/140/3/60
J=D105/35/36/42/7.5i
PS=CN-border-JD.ps

gmt set FONT_ANNOT_PRIMARY 9p FORMAT_GEO_MAP ddd:mm:ssF
gmt set MAP_FRAME_WIDTH 2p MAP_GRID_PEN_PRIMARY 0.25p,gray,2_2:1
# 设置比例尺标签为35号中文字体
gmt set FONT_LABEL 8p,35 MAP_LABEL_OFFSET 4p

gmt pscoast -J$J -R$R -G244/243/239 -S167/194/223 -B10f5g10 -Lg85/11&amp;#43;c11&amp;#43;w900k&amp;#43;f&amp;#43;u&amp;#43;l&amp;#39;比例尺&amp;#39; -K &amp;gt; $PS
gmt psxy CN-border-La.dat -J$J -R$R -W0.5p -O &amp;gt;&amp;gt; $PS
rm gmt.conf gmt.history
&lt;/code&gt;&lt;/pre&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;http://gmt-china.org/example/ex003/CN-border-JD.png&#34; /&gt;
    
    
    &lt;figcaption&gt;
        &lt;h4&gt;中国地图&lt;/h4&gt;
        
    &lt;/figcaption&gt;
    
&lt;/figure&gt;
&lt;/p&gt;

&lt;h2 id=&#34;jm-墨卡托投影&#34;&gt;-JM 墨卡托投影&lt;/h2&gt;

&lt;p&gt;


&lt;pre&gt;&lt;code class=&#34;language-bash line-numbers&#34;&gt;#!/bin/bash
R=70/138/13/56
J=M105/35/6.5i
PS=CN-border-JM.ps

gmt set MAP_GRID_PEN_PRIMARY 0.25p,gray,2_2:1
gmt set FORMAT_GEO_MAP ddd:mm:ssF MAP_FRAME_WIDTH 3p
gmt set FONT_ANNOT_PRIMARY 7p
# 设置比例尺标签为35号中文字体
gmt set FONT_LABEL 8p,35 MAP_LABEL_OFFSET 4p

# 绘制中国地图
gmt pscoast -J$J -R$R -G244/243/239 -S167/194/223 -B10f5g10 -Lg85/17.5&amp;#43;c17.5&amp;#43;w800k&amp;#43;f&amp;#43;u&amp;#43;l&amp;#39;比例尺&amp;#39; -K &amp;gt; $PS
gmt psxy CN-border-La.dat -J$J -R$R -W0.5p -O -K &amp;gt;&amp;gt; $PS

# 绘制南海区域
R=105/123/3/24
J=M1.1i
gmt psbasemap -J$J -R$R -B0 -X5.4i --MAP_FRAME_TYPE=plain --MAP_FRAME_PEN=1p -K -O &amp;gt;&amp;gt; $PS
gmt pscoast -J$J -R$R -N1/0.1p -W1/0.25p -G244/243/239 -S167/194/223 -K -O &amp;gt;&amp;gt; $PS
gmt psxy CN-border-La.dat -J$J -R$R -W0.25p -O -K &amp;gt;&amp;gt; $PS
echo &amp;#34;南海诸岛&amp;#34; | gmt pstext -J$J -R$R -F&amp;#43;f10p,35&amp;#43;cBC -D0c/0.1c -N -Gwhite -O &amp;gt;&amp;gt; $PS

rm gmt.conf gmt.history
&lt;/code&gt;&lt;/pre&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;http://gmt-china.org/example/ex003/CN-border-JM.png&#34; /&gt;
    
    
    &lt;figcaption&gt;
        &lt;h4&gt;中国地图&lt;/h4&gt;
        
    &lt;/figcaption&gt;
    
&lt;/figure&gt;
&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>震源机制分布图</title>
      <link>http://gmt-china.org/example/ex001/</link>
      <pubDate>Mon, 03 Oct 2016 00:00:00 +0000</pubDate>
      <author>admin@gmt-china.org (GMT 中文社区)</author>
      <guid>http://gmt-china.org/example/ex001/</guid>
      <description>&lt;p&gt;本示例展示了如何绘制震源球的分布图。震级的大小由震源球的大小来表征，震源的深度则由震源球的压缩象限的颜色表示。&lt;/p&gt;




&lt;pre&gt;&lt;code class=&#34;language-bash line-numbers&#34;&gt;#!/bin/bash
#   绘制震源机制分布图，震级控制震源球大小，深度控制震源球颜色

J=Q104/15c
R=102.5/105.5/30.5/32.5
PS=beachball.ps
CPT=meca.cpt

# 生成CPT文件，为每个深度段设置不同的颜色
cat &amp;lt;&amp;lt; EOF &amp;gt; $CPT
 0   0-1-1   20   0-1-1
20  60-1-1   40  60-1-1
40 120-1-1   60 120-1-1
60 240-1-1  100 240-1-1
EOF

gmt psbasemap -J$J -R$R -B1 -BWSen -P -K &amp;gt; $PS
gmt pscoast -J -R -Da -Ia/0.05,black -K -O &amp;gt;&amp;gt; $PS
gmt psmeca -J -R -CP5p -Sa1.3c -Z$CPT -K -O &amp;gt;&amp;gt; $PS &amp;lt;&amp;lt; EOF
# 经度 纬度 深度(km) strike dip rake 震级 newX newY ID
104.3300  31.90    39.8  32.00 64.00   85.00  7.0 0        0       A
104       31.52    27.1  22.00 53.00   57.00  6.0 0        0       B
103.6700  31.1300   6.4  86.00 32.00  -65.00  8.0 0        0       C
103.900   31.3400  43.6 194.00 84.00  179.00  4.9 104.180  30.8400 D
103.7200  31.4400  67.3  73.00 84.00 -162.00  4.9 103.120  31.6400 E
104.1200  31.7800  12.7 186.00 68.00  107.00  4.7 103.830  32.2600 F
104.2300  31.6100  62.0  86.00 63.00  -51.00  4.7 104.960  31.6900 G
EOF

gmt psscale -J -R -C$CPT -DjBL&amp;#43;w5c/0.5c&amp;#43;ml&amp;#43;o0.8c/0.4c -Bx&amp;#43;lDepth -By&amp;#43;lkm -L -S -K -O &amp;gt;&amp;gt; $PS
gmt psxy -J -R -T -O &amp;gt;&amp;gt; $PS
rm gmt.* $CPT
&lt;/code&gt;&lt;/pre&gt;


&lt;p&gt;
&lt;figure &gt;
    
        &lt;img src=&#34;http://gmt-china.org/example/ex001/beachball.png&#34; /&gt;
    
    
    &lt;figcaption&gt;
        &lt;h4&gt;震源球分布图&lt;/h4&gt;
        
    &lt;/figcaption&gt;
    
&lt;/figure&gt;
&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>绘制地球内部主要界面</title>
      <link>http://gmt-china.org/example/ex002/</link>
      <pubDate>Wed, 31 Aug 2016 00:00:00 +0000</pubDate>
      <author>admin@gmt-china.org (GMT 中文社区)</author>
      <guid>http://gmt-china.org/example/ex002/</guid>
      <description>&lt;p&gt;在利用地震波研究地球深部结构时，经常需要绘制震相在深度剖面下的射线路径，同时也需要绘制地球内部的主要界面。&lt;/p&gt;

&lt;p&gt;震相的射线路径可以用 &lt;a href=&#34;http://www.seis.sc.edu/taup/&#34; target=&#34;_blank&#34;&gt;TauP&lt;/a&gt; 提供的 &lt;code&gt;taup_path&lt;/code&gt; 命令计算得到，然后在极坐标系 &lt;code&gt;-JP&lt;/code&gt; 中绘制。难点在于如何绘制几个主要界面。&lt;/p&gt;

&lt;p&gt;本示例将展示如何绘制震中距为30度的 PcP 和 PKiKP 震相的射线路径，同时绘制地球内的410、660界面以及 CMB 和 ICB。最终的绘图效果如下：&lt;/p&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;http://gmt-china.org/example/ex002/earth-discontinuities.png&#34; width=&#34;300px&#34; /&gt;
    
    
    &lt;figcaption&gt;
        &lt;h4&gt;震相射线路径&lt;/h4&gt;
        
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;p&gt;绘图脚本如下：&lt;/p&gt;




&lt;pre&gt;&lt;code class=&#34;language-bash line-numbers&#34;&gt;#!/bin/bash
J=Pa10c/15
R=-10/40/0/6371
PS=earth-discontinuities.ps

gmt set MAP_GRID_PEN_PRIMARY 1p

# 绘制地表
gmt psbasemap -J$J -R$R -Byg6371 -Bs -K &amp;gt; $PS
# 绘制 410 界面
gmt psbasemap -J$J -R$R -Byg6371&amp;#43;5961 -Bs -K -O &amp;gt;&amp;gt; $PS
# 绘制 660 界面
gmt psbasemap -J$J -R$R -Byg6371&amp;#43;5711 -Bs -K -O &amp;gt;&amp;gt; $PS
# 绘制 CMB
gmt psbasemap -J$J -R$R -Byg6371&amp;#43;3480 -Bs -K -O &amp;gt;&amp;gt; $PS
# 绘制 ICB
gmt psbasemap -J$J -R$R -Byg6371&amp;#43;1221 -Bs -K -O &amp;gt;&amp;gt; $PS

# 计算并绘制震相的射线路径
taup_path -mod prem -ph PcP -h 300 -deg 30 -o PcP.raypath
taup_path -mod prem -ph PKiKP -h 300 -deg 30 -o PKiKP.raypath
gmt psxy PcP.raypath.gmt -W1p,blue -J$J -R$R -K -O &amp;gt;&amp;gt; $PS
gmt psxy PKiKP.raypath.gmt -W1p,red -J$J -R$R -K -O &amp;gt;&amp;gt; $PS

# 绘制震源和台站位置
gmt psxy -J$J -R$R -S -Gblack -N -K -O &amp;gt;&amp;gt; $PS &amp;lt;&amp;lt; EOF
0 6071 0.4c a
30 6471 0.4c i
EOF

# 添加标注
gmt pstext -J$J -R$R -F&amp;#43;f11p&amp;#43;a -N -K -O &amp;gt;&amp;gt; $PS &amp;lt;&amp;lt; EOF
-6 6170 20 Surface
-6 3280 20 CMB
-3 1020 20 ICB
16 4100 0 @;blue;PcP@;;
37 1600 0 @;red;PKiKP@;;
EOF

gmt psxy -J$J -R$R -T -O &amp;gt;&amp;gt; $PS
rm gmt.* *.raypath.gmt
&lt;/code&gt;&lt;/pre&gt;


&lt;p&gt;脚本中使用了五个 &lt;code&gt;psbasemap&lt;/code&gt; 命令分别绘制五个界面。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;第一个 &lt;code&gt;psbasemap&lt;/code&gt; 用于绘制地表， &lt;code&gt;-Byg6371&lt;/code&gt; 表明要在 Y 方向（极坐标下即 R 方向）以6371为间隔绘制网格线，由于地球半径是6371，所以理论上会在R=0和 R=6371 两处绘制网格线。 &lt;code&gt;-Bs&lt;/code&gt; 的作用是只绘制 R=6371 处的网格线，且只绘制网格线而不绘制刻度；&lt;/li&gt;
&lt;li&gt;第二个 &lt;code&gt;pabasemap&lt;/code&gt; 用于绘制410界面，其与前一命令基本相同，唯一的区别是 &lt;code&gt;-Byg6371+5961&lt;/code&gt; 中多了 &lt;code&gt;+5961&lt;/code&gt;，其作用是定义网格线的起算点，即此时将在 R=5961（即410界面）处绘制网格线。&lt;/li&gt;
&lt;li&gt;其他同理&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>