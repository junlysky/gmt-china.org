<!DOCTYPE html>
<html lang=zh-cmn-Hans >


    <meta charset=utf-8 >
    <meta http-equiv=X-UA-Compatible  content="IE=edge">
    <meta name=viewport  content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name=generator  content="Hugo 0.17" />
    <meta name=author  content="GMT 中文社区">
    <meta name=description  content="面向 GMT 中文用户的小众社区">
    <title>MIF2GMT：将MIF转换为GMT可用的数据格式 | GMT 中文社区</title>

    
    <link href="//cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel=stylesheet >
    <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel=stylesheet >
    <link href="//cdn.bootcss.com/prism/1.5.1/themes/prism-solarizedlight.min.css" rel=stylesheet >
    <link href="//cdn.bootcss.com/prism/1.5.1/plugins/line-numbers/prism-line-numbers.min.css" rel=stylesheet >
    <link href="//cdn.bootcss.com/featherlight/1.5.0/featherlight.min.css" rel=stylesheet >
    <link rel=stylesheet  href="http://gmt-china.org/css/style.css" />
    <link rel=stylesheet  href="http://gmt-china.org/css/mobile.css" />

    <link rel="shortcut icon" href="http://gmt-china.org/images/favicon.ico" type="image/x-icon" type="image/png" />
<link rel=icon  href="http://gmt-china.org/images/apple-touch-icon-152x152.png" type="image/png" />
<link rel=apple-touch-icon  href="http://gmt-china.org/images/apple-touch-icon.png" type="image/png" />
<link rel=apple-touch-icon  sizes=57x57  href="http://gmt-china.org/images/apple-touch-icon-57x57.png" type="image/png" />
<link rel=apple-touch-icon  sizes=72x72  href="http://gmt-china.org/images/apple-touch-icon-72x72.png" type="image/png" />
<link rel=apple-touch-icon  sizes=76x76  href="http://gmt-china.org/images/apple-touch-icon-76x76.png" type="image/png" />
<link rel=apple-touch-icon  sizes=114x114  href="http://gmt-china.org/images/apple-touch-icon-114x114.png" type="image/png" />
<link rel=apple-touch-icon  sizes=120x120  href="http://gmt-china.org/images/apple-touch-icon-120x120.png" type="image/png" />
<link rel=apple-touch-icon  sizes=144x144  href="http://gmt-china.org/images/apple-touch-icon-144x144.png" type="image/png" />
<link rel=apple-touch-icon  sizes=152x152  href="http://gmt-china.org/images/apple-touch-icon-152x152.png" type="image/png" />
<link rel=apple-touch-icon  sizes=180x180  href="http://gmt-china.org/images/apple-touch-icon-180x180.png" type="image/png" />
<meta name=msapplication-TileImage  content="http://gmt-china.org/images/apple-touch-icon-144x144.png"/>
<meta name=msapplication-TileColor  content="#d83434"/>


    




    <div class=container >
        <header id=header >
    <div class=outer >
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class=container-fluid >
                <div class=navbar-header >
                    <button type=button  class="navbar-toggle collapsed" data-toggle=collapse  data-target="#navbar-collapse-menu" aria-expanded=false >
          	                <span class=sr-only >Toggle navigation</span>
          	                <span class=icon-bar ></span>
          	                <span class=icon-bar ></span>
          	                <span class=icon-bar ></span>
          	            </button>
    		            <a class=navbar-brand  href="http://gmt-china.org/">
    			            <span class=site-title >GMT 中文社区</span>
    		            </a>
                </div>

                <div class="collapse navbar-collapse" id=navbar-collapse-menu >
                    <ul class="nav navbar-nav navbar-right">
                        
                        
                        <li class=nav-item ><a href="/">首页</a>
                        
                        <li class=nav-item ><a href="/docs/">文档</a>
                        
                        <li class=nav-item ><a href="/gallery/">图库</a>
                        
                        <li class=nav-item ><a href="/blog/">博客</a>
                        
                        <li class=nav-item ><a href="/download/">下载</a>
                        
                        <li class=nav-item ><a href="/authors/">贡献者</a>
                        
                        <li class=nav-item ><a href="/about/">关于</a>
                        
                        
                        
                        <li class=nav-item ><a href="https://github.com/gmt-china"><i class="fa fa-github fa-lg" aria-hidden=true ></i></a>
                        
                        <li class=nav-item ><a href="mailto:admin@gmt-china.org"><i class="fa fa-envelope fa-lg" aria-hidden=true ></i></a>
                        
                        <li><a href="http://gmt-china.org/index.xml"><i class="fa fa-rss-square fa-lg" aria-hidden=true ></i></a>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
</header>


        <div id=body >
            <div class=outer >
                <section id=main >
                    <article>
                        <div class=article-inner >
                            <header class=article-header >
    <h1 class=article-title  itemprop=name >
	<a href="http://gmt-china.org/blog/mif2gmt/" class=permalink >MIF2GMT：将MIF转换为GMT可用的数据格式</a>
    </h1>

    
    <div class=article-meta >
        
        
        
        <div class=article-category >
            <i class="fa fa-sitemap"></i>
            
            <a class=article-category-link  href="http://gmt-china.org/categories/GMT%E5%B7%A5%E5%85%B7">GMT工具</a>
            
            
        </div>
        
        

        

        
        
        
        <div class=article-category >
            <i class="fa fa-user"></i>
            
            <a class=article-category-link  href="http://gmt-china.org/authors/%E9%9F%A6%E8%BF%9B">韦进</a>
            ,
            
            <a class=article-category-link  href="http://gmt-china.org/authors/%E5%88%98%E7%8F%A0%E5%A6%B9">刘珠妹</a>
            
            
        </div>
        
        

        
        <time class=article-date  datetime="2016-10-18 00:00:00 &#43;0000 UTC" itemprop=datePublished >2016年10月18日</time>
        
    </div>
    
</header>

                            <div class=article-body  itemprop=articleBody >
                                

                                

<div class="alert alert-info" role=alert >                              
程序下载：
<a href="/datas/MIF2GMT.exe">MIF2GMT.exe</a>
源码：<a href="https://github.com/gmt-china/GMT_tools/tree/master/MIF2GMT">MIF2GMT</a>
</div>  

<p>工作中经常用到的一些数据，如断层、国界、省界、居民点，很多是MapInfo的TAB、MIF等文件格式，不能在GMT中直接使用，需要经过转换方可使用。</p>

<p>MIF2GMT 是一个将 MIF 格式的数据转换为 GMT 可用的 XY 格式的文本数据的小工具。此工具用 C# 写成，在 Windows 平台下可直接使用。</p>

<h2 id="工具使用">工具使用</h2>

<p>工具运行环境：Windows平台、.NET Framework 4.0 及以上。</p>

<p>数据要求：此工具只支持MIF格式的数据。若原数据为MIF格式，则可直接使用。若原数据为TAB格式，则需要在MapInfo或其他软件中导出为MIF文件。</p>

<p>下载软件后，直接运行 <code>MIT2GMT.exe</code>，选择一个或多个MIF文件，程序自动在该文件当前目录下生成同名XY文件。</p>

<h2 id="原理">原理</h2>

<h3 id="mapinfo数据格式">MapInfo数据格式</h3>

<p>MapInfo 数据存储在包括 <code>*.TAB</code>、<code>*.DAT</code>（二进制）、<code>*.MAP</code>（二进制）、<code>*.ID</code>（二进制）为一组的文件中。分别存储着属性表结构、属性数据、空间数据和索引数据。</p>

<p>MapInfo未公开其内部数据结构，我们只能用以MapInfo为基础平台的软件打开以上数据。对外数据交换由 <code>*.MIF</code> 和 <code>*.MID</code> 这一组文本文件完成。也就是说我们可以将 <code>*.TAB</code> 数据导出为 <code>*.MIF</code> 和 <code>*.MID</code>，并对这两个文件进行编辑和再处理。其中 <code>*.MIF</code> 保存着表结构和对象的空间信息（坐标、符号样式）、 <code>*.MID</code> 则按同样顺序保存对象的属性信息。</p>

<h3 id="数据提取原理">数据提取原理</h3>

<p><code>*.MIF</code> 文件包括文件头和数据区。由于我们关注的是表数据（尤其是坐标值），因此我们需要将 <code>*MIF</code> 中的数据部分提取出来。对于不同类型的表，数据的存储格式分别为：</p>

<h4 id="点">点</h4>

<p>点数据格式：</p>

<pre><code>POINT x y
&lt;SYMBOL (shape, color, size)&gt;
</code></pre>

<p>注： <code>&lt;&gt;</code> 表示可省略。</p>

<p>例如：</p>

<pre><code>***文件头***省略***

Point 69.136757 34.530907
    Symbol (41,8726016,10)
Point 62.209999 34.459999
    Symbol (41,8726016,10)
Point 65.5 31.6
    Symbol (41,8726016,10)
</code></pre>

<h4 id="线">线</h4>

<p>线数据格式：</p>

<pre><code>PLINE &lt;num&gt;
x1 y1
x2 y2
...
    &lt;PEN (width, pattern, color)&gt;
    &lt;SMOOTH&gt;
</code></pre>

<p>例如：</p>

<pre><code>***文件头***省略***

Pline 5
86.44583 43.54956
86.48676 43.54472
86.53923 43.56675
86.59575 43.58853
86.6591 43.6133
    Pen (2,2,16711680)
    Smooth
Pline 17
86.58673 43.57684
86.67906 43.56702
86.77592 43.55147
...
</code></pre>

<h4 id="面数据">面数据</h4>

<p>面数据格式：</p>

<pre><code>REGION &lt;num_region&gt;
num_points
x1 y1
x2 y2
...
    &lt;PEN (width, pattern, color)&gt;
    &lt;BRUSH (pattern, forecolor, backcolor)&gt;
    &lt;CENTER x y&gt;
</code></pre>

<p>注： <code>num_region</code> 指多边形的数量，<code>num_points</code>指每个多边形节点的数量。</p>

<p>例如：</p>

<pre><code>***文件头***省略***
...
Region  1
  5
121.925263 25.446125
121.927017 25.449965
121.929497 25.452316
121.935623 25.452707
121.936172 25.450329
    Pen (1,2,8421504)
    Brush (2,16756991,16777215)
    Center 120.935652 23.647805
Region  1
  15858
109.278892 31.723522
...
</code></pre>

<p>以上是基本图形的简化格式，一般我们只需要知道这一个文件的节点坐标，简单的做法就是识别坐标数据，属性部分替换为 <code>&gt;</code>，表示数据分段，最后输出文件。这也是 <code>MIF2GMT.exe</code> 所做的工作。</p>

<h2 id="将来工作">将来工作</h2>

<p>了解了MIF及MID数据格式后，还可以做的工作包括：</p>

<ul>
<li>提取其中某段数据；
<li>提取坐标以及图形线型、颜色属性；
<li>提取MIF文件中的坐标值，MID文件中的属性值（如名称等），合并为一个数据；
<li>等等等等
</ul>

                            </div>
                            <footer class=article-footer >
</footer>

                        </div>
                        
<nav>
    <ul class=pager >
        
        <li class=previous >
            <a href="http://gmt-china.org/blog/numbering-subfigures/">
                <strong class=article-nav-caption >
                上一篇
                </strong>
                <div class=article-nav-title >为子图添加编号</div>
            </a>
        
        

        
    </ul>
</nav>


                    </article>
                </section>
            </div>
        </div>
        <footer id=footer  class=footer >
    <div class=copyright >
        &copy; 
        <span itemprop=copyrightYear > 2016</span>
        <span class=with-love ><i class="fa fa-heart"></i></span>
        <span class=author  itemprop=copyrightHolder >GMT 中文社区</span>
    </div>
    <div class=powered-by >Powered by <a href="https://gohugo.io" target=_blank >Hugo</a> &amp; Hosted by <a href="https://github.com/gmt-china/gmt-china.org" target=_blank >GitHub</a>.</div>
</footer>
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
<script src="//cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="//cdn.bootcss.com/prism/1.5.1/prism.min.js"></script>
<script src="//cdn.bootcss.com/prism/1.5.1/components/prism-bash.min.js"></script>
<script src="//cdn.bootcss.com/prism/1.5.1/plugins/line-numbers/prism-line-numbers.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.12/clipboard.js"></script>
<script src="//cdn.bootcss.com/featherlight/1.5.0/featherlight.min.js"></script>
<script src="http://gmt-china.org/js/script.js"></script>


    </div>